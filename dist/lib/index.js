"use strict";var K=Object.create;var u=Object.defineProperty;var Q=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames,U=Object.getOwnPropertySymbols,W=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var E=(t,e,a)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,y=(t,e)=>{for(var a in e||(e={}))T.call(e,a)&&E(t,a,e[a]);if(U)for(var a of U(e))X.call(e,a)&&E(t,a,e[a]);return t};var Y=(t,e)=>{for(var a in e)u(t,a,{get:e[a],enumerable:!0})},b=(t,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of V(e))!T.call(t,r)&&r!==a&&u(t,r,{get:()=>e[r],enumerable:!(i=Q(e,r))||i.enumerable});return t};var Z=(t,e,a)=>(a=t!=null?K(W(t)):{},b(e||!t||!t.__esModule?u(a,"default",{value:t,enumerable:!0}):a,t)),j=t=>b(u({},"__esModule",{value:!0}),t);var L=(t,e,a)=>new Promise((i,r)=>{var d=o=>{try{p(a.next(o))}catch(g){r(g)}},f=o=>{try{p(a.throw(o))}catch(g){r(g)}},p=o=>o.done?i(o.value):Promise.resolve(o.value).then(d,f);p((a=a.apply(t,e)).next())});var te={};Y(te,{useFirebaseFileUploader:()=>x});module.exports=j(te);var n=Z(require("react")),c=require("firebase/storage"),I=require("lodash"),M=require("nanoid");var H=require("react/jsx-runtime"),N=({payload:t,file:e})=>(0,I.isFunction)(t)?t(e==null?void 0:e.name):t||(0,M.nanoid)(),ee=t=>{let[e,a]=n.useState(!1),[i,r]=n.useState(0),[d,f]=n.useState(""),[p,o]=n.useState(""),[g,C]=n.useState(""),[k,w]=n.useState(""),[B,D]=n.useState(),$=n.forwardRef((v,A)=>{let O=l=>{let m=Math.round(l.bytesTransferred/l.totalBytes*100);r(m)},P=l=>{a(!1),D(l),console.log(l)};return(0,H.jsx)("input",y({type:"file",onChange:l=>{l.preventDefault();let s=l.currentTarget.files[0];w(s.name),C(s.type),a(!0);let{includeExt:_,filename:R,storage:q,path:z}=t,F=_?s==null?void 0:s.type.replace(/(.*)\//g,""):null,S=F?N({payload:R,file:s})+"."+F:N({payload:R,file:s});if(o(S),!s)return;let G=(0,c.ref)(q,`/${z}/${S}`),h=(0,c.uploadBytesResumable)(G,s);h.on("state_changed",O,P,()=>L(void 0,null,function*(){let J=yield(0,c.getDownloadURL)(h.snapshot.ref);f(J),a(!1)}))},disabled:e,ref:A},v))});return{uploading:e,progress:i,fileURL:d,fileName:p,originalFileName:k,fileType:g,error:B,FileUploaderUI:$}},x=ee;0&&(module.exports={useFirebaseFileUploader});
