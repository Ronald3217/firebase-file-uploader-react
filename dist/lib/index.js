"use strict";var J=Object.create;var g=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var Q=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var U=(e,t,a)=>t in e?g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,T=(e,t)=>{for(var a in t||(t={}))E.call(t,a)&&U(e,a,t[a]);if(h)for(var a of h(t))W.call(t,a)&&U(e,a,t[a]);return e};var X=(e,t)=>{for(var a in t)g(e,a,{get:t[a],enumerable:!0})},y=(e,t,a,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Q(t))!E.call(e,r)&&r!==a&&g(e,r,{get:()=>t[r],enumerable:!(i=K(t,r))||i.enumerable});return e};var Y=(e,t,a)=>(a=e!=null?J(V(e)):{},y(t||!e||!e.__esModule?g(a,"default",{value:e,enumerable:!0}):a,e)),Z=e=>y(g({},"__esModule",{value:!0}),e);var b=(e,t,a)=>new Promise((i,r)=>{var d=o=>{try{p(a.next(o))}catch(u){r(u)}},m=o=>{try{p(a.throw(o))}catch(u){r(u)}},p=o=>o.done?i(o.value):Promise.resolve(o.value).then(d,m);p((a=a.apply(e,t)).next())});var ee={};X(ee,{useFirebaseFileUploader:()=>M});module.exports=Z(ee);var n=Y(require("react")),c=require("firebase/storage"),N=require("lodash"),I=require("nanoid");var x=require("react/jsx-runtime"),L=({payload:e,file:t})=>(0,N.isFunction)(e)?e(t==null?void 0:t.name):e||(0,I.nanoid)(),j=e=>{let[t,a]=n.useState(!1),[i,r]=n.useState(0),[d,m]=n.useState(""),[p,o]=n.useState(""),[u,H]=n.useState(""),[C,k]=n.useState(""),[w,B]=n.useState(),D=n.forwardRef(($,v)=>{let A=l=>{let f=Math.round(l.bytesTransferred/l.totalBytes*100);r(f)},O=l=>{a(!1),B(l),console.log(l)};return(0,x.jsx)("input",T({type:"file",onChange:l=>{l.preventDefault();let s=l.currentTarget.files[0];k(s.name),H(s.type),a(!0);let R=e!=null&&e.includeExt?s==null?void 0:s.type.replace(/(.*)\//g,""):null,{filename:F,storage:P,path:_}=e,q=R?L({payload:F,file:s})+"."+R:L({payload:F,file:s});if(o(q),!s)return;let z=(0,c.ref)(P,`${_}/${p}`),S=(0,c.uploadBytesResumable)(z,s);S.on("state_changed",A,O,()=>b(void 0,null,function*(){let G=yield(0,c.getDownloadURL)(S.snapshot.ref);m(G),a(!1)}))},disabled:t,ref:v},$))});return{uploading:t,progress:i,fileURL:d,fileName:p,originalFileName:C,fileType:u,error:w,FileUploaderUI:D}},M=j;0&&(module.exports={useFirebaseFileUploader});
