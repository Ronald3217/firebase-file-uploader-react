"use strict";var K=Object.create;var u=Object.defineProperty,Q=Object.defineProperties,W=Object.getOwnPropertyDescriptor,X=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,Z=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(t,e,a)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,E=(t,e)=>{for(var a in e||(e={}))y.call(e,a)&&U(t,a,e[a]);if(h)for(var a of h(e))j.call(e,a)&&U(t,a,e[a]);return t},T=(t,e)=>Q(t,X(e));var ee=(t,e)=>{for(var a in e)u(t,a,{get:e[a],enumerable:!0})},x=(t,e,a,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Y(e))!y.call(t,r)&&r!==a&&u(t,r,{get:()=>e[r],enumerable:!(i=W(e,r))||i.enumerable});return t};var te=(t,e,a)=>(a=t!=null?K(Z(t)):{},x(e||!t||!t.__esModule?u(a,"default",{value:t,enumerable:!0}):a,t)),ae=t=>x(u({},"__esModule",{value:!0}),t);var I=(t,e,a)=>new Promise((i,r)=>{var f=o=>{try{g(a.next(o))}catch(c){r(c)}},d=o=>{try{g(a.throw(o))}catch(c){r(c)}},g=o=>o.done?i(o.value):Promise.resolve(o.value).then(f,d);g((a=a.apply(t,e)).next())});var ne={};ee(ne,{useFirebaseFileUploader:()=>M});module.exports=ae(ne);var n=te(require("react")),p=require("firebase/storage"),L=require("lodash"),H=require("nanoid");var k=require("react/jsx-runtime"),N=({payload:t,file:e})=>(0,L.isFunction)(t)?t(e==null?void 0:e.name):t||(0,H.nanoid)(),re=t=>{let[e,a]=n.useState(!1),[i,r]=n.useState(0),[f,d]=n.useState(""),[g,o]=n.useState(""),[c,w]=n.useState(""),[C,P]=n.useState(""),[B,D]=n.useState(!1),$=n.forwardRef((v,A)=>{let O=l=>{let m=Math.round(l.bytesTransferred/l.totalBytes*100);r(m)},V=l=>{a(!1),D(l),console.log(l)};return(0,k.jsx)("input",T(E({type:"file",onChange:l=>{l.preventDefault();let s=l.currentTarget.files[0];P(s.name),w(s.type),a(!0);let{includeExt:_,filename:F,storage:q,path:z}=t,R=_?s==null?void 0:s.type.replace(/(.*)\//g,""):null,b=R?N({payload:F,file:s})+"."+R:N({payload:F,file:s});if(o(b),!s)return;let G=(0,p.ref)(q,`/${z}/${b}`),S=(0,p.uploadBytesResumable)(G,s);S.on("state_changed",O,V,()=>I(void 0,null,function*(){let J=yield(0,p.getDownloadURL)(S.snapshot.ref);d(J),a(!1)}))},disabled:e},v),{ref:A}))});return{uploading:e,progress:i,fileURL:f,fileName:g,originalFileName:C,fileType:c,error:B,FileUploaderUI:$}},M=re;0&&(module.exports={useFirebaseFileUploader});
